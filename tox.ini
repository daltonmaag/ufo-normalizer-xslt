[tox]
isolated_build = true
envlist = lint, py38

[testenv]
whitelist_externals = poetry
commands =
    poetry install -v
    poetry run pytest --cov --cov-config .coveragerc --cov-report html:htmlcov --cov-report term {posargs}

[testenv:lint]
whitelist_externals = poetry
commands =
    poetry install -v
    poetry run black --check --diff src tests
    poetry run isort --check-only --diff src tests
    ; poetry run mypy src tests
    poetry run pylint src tests

# https://black.readthedocs.io/en/stable/compatible_configs.html#flake8
[flake8]
max-line-length = 88
extend-ignore = E203, W503
